<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Protocolo de Exames</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <style>
/* Seção 1: Estilos Gerais do Corpo e Títulos */
    body {
        font-family: Arial, sans-serif;
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 20px;
        margin: 0;
        /* NOVO: Plano de Fundo com Padrão */
        background-color: #E0E6EE; /* Um azul marinho muito claro, quase cinza-azulado */
        background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" viewBox="0 0 200 200"><text x="10" y="50" font-family="Arial, sans-serif" font-size="20" fill="%23FFFFFF" fill-opacity="0.1" transform="rotate(-20 10 50)">CETEP</text><text x="100" y="150" font-family="Arial, sans-serif" font-size="20" fill="%23FFFFFF" fill-opacity="0.1" transform="rotate(-20 100 150)">LNAB</text></svg>');
        background-repeat: repeat;
        background-size: 200px 200px; /* Tamanho do tile do padrão */
    }

    h2, h3 {
        color: #1A2B4C; /* Azul Marinho mais escuro para títulos */
        margin-bottom: 20px;
    }

    /* Seção 2: Estilos do Container Principal do Formulário */
    .form-container {
        background-color: white;
        padding: 30px;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.15); /* Sombra um pouco mais pronunciada */
        width: 80%;
        max-width: 900px;
        box-sizing: border-box;
        margin-bottom: 20px;
    }

    /* Seção 4: Estilos dos Campos Individuais do Formulário */
    .form-field label {
        font-weight: bold;
        margin-bottom: 5px;
        color: #334466; /* Azul Marinho para rótulos */
    }

    .form-field input[type="text"],
    .form-field input[type="date"],
    .form-field select,
    .form-field textarea {
        padding: 10px;
        border: 1px solid #AABBDD; /* Borda mais suave */
        border-radius: 4px;
        font-size: 1em;
        width: 100%;
        box-sizing: border-box;
    }

    /* Estilo para campos com erro */
    .form-field input.error,
    .form-field select.error,
    .form-field textarea.error {
        border-color: #CC3333; /* Vermelho mais vibrante para erro */
        box-shadow: 0 0 0 2px rgba(204, 51, 51, 0.3); /* Sombra para destacar */
    }

    /* Estilo para mensagens de erro */
    .error-message {
        color: #CC3333; /* Vermelho para mensagens de erro */
        font-size: 0.85em;
        margin-top: 5px;
    }

    /* Seção 8: Estilos dos Botões de Ação */
    button {
        padding: 10px 20px;
        margin: 5px;
        border: none;
        border-radius: 5px;
        background-color: #1A2B4C; /* Azul Marinho para botões */
        color: white;
        cursor: pointer;
        font-size: 1em;
        transition: background-color 0.3s ease;
    }

    button:hover {
        background-color: #0F1D33; /* Azul Marinho mais escuro no hover */
    }

    /* Seção 9: Estilos para o Histórico de Cadastros */
    #historico {
        background-color: white;
        padding: 20px;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        width: 80%;
        max-width: 900px;
        margin-top: 20px;
        box-sizing: border-box;
    }

    #historico h3 {
        margin-top: 0;
        color: #1A2B4C; /* Azul Marinho para título do histórico */
    }

    #historico li {
        background-color: #F8F9FA; /* Um branco muito suave para itens da lista */
        margin-bottom: 8px;
        padding: 10px;
        border-radius: 4px;
        border: 1px solid #E0E6EE; /* Borda suave */
        cursor: pointer;
        transition: background-color 0.2s ease;
    }

    #historico li:hover {
        background-color: #DDE5EE; /* Azul claro no hover */
    }
    </style>
</head>
<body>

    <h2>Cadastro para Protocolo de Exames</h2>

    <div class="form-container">
        <div class="form-row">
            <div class="form-field full-width">
                <label for="nome">Nome:</label>
                <input type="text" id="nome">
            </div>
        </div>

        <div class="form-row">
            <div class="form-field">
                <label for="data_nasc">Data de Nascimento:</label>
                <input type="date" id="data_nasc" onblur="validateAge()">
                <div id="data_nasc-error" class="error-message"></div>
            </div>
            <div class="form-field">
                <label for="idade">Idade:</label>
                <input type="text" id="idade" readonly>
            </div>
            <div class="form-field">
                <label for="sexo">Sexo:</label>
                <select id="sexo">
                    <option value="">Selecione</option>
                    <option value="Masculino">Masculino</option>
                    <option value="Feminino">Feminino</option>
                    <option value="Outro">Outro</option>
                </select>
            </div>
        </div>

        <div class="form-row">
            <div class="form-field">
                <label for="cpf">CPF:</label>
                <input type="text" id="cpf" maxlength="14" placeholder="000.000.000-00" onblur="validateCpf()">
                <div id="cpf-error" class="error-message"></div>
            </div>
            <div class="form-field">
                <label for="contato">Contato (DDD + Número):</label>
                <input type="text" id="contato" maxlength="15" placeholder="(DD) 9XXXX-XXXX" onblur="validateContact()">
                <div id="contato-error" class="error-message"></div>
            </div>
        </div>

        <div class="form-row">
            <div class="form-field full-width">
                <label for="endereco">Endereço:</label>
                <input type="text" id="endereco">
            </div>
        </div>

        <div class="form-row">
            <div class="form-field full-width">
                <label for="observacoes">Observações (até 500 caracteres):</label>
                <textarea id="observacoes" rows="4" maxlength="500"></textarea>
            </div>
        </div>
    </div>

    <div class="form-container">
        <h3>Pesquisar e Adicionar Exames:</h3>
        <input type="text" id="pesquisaExame" placeholder="Digite para pesquisar..." autocomplete="off">
        <div id="sugestoes" class="sugestoes-box"></div>

        <h3>Exames Selecionados:</h3>
        <div id="exames">
            </div>
    </div>

    <div class="nao-imprimir" style="margin-top: 20px;">
        <button onclick="gerarPDF()">Gerar PDF</button>
        <button onclick="salvarLocal()">Salvar Local</button>
        <button onclick="enviarParaPlanilha()">Enviar para Planilha</button>
        <button onclick="mostrarHistorico()">Ver Histórico</button>
        <button onclick="window.print()">Imprimir Tela</button> <button onclick="limparCampos()">Limpar Campos</button> <button onclick="limparHistorico()">Limpar Histórico</button>
    </div>

    <div id="historico" class="nao-imprimir"></div>

    <script src="script.js"></script>

</body>
</html>
